namespace = lotr_maintenance

#Various maintenance events

		
lotr_maintenance.1 = { 
	
	type = country_event
  title = "lotr_maintenance.1.t"
  desc = "lotr_maintenance.1.desc"
  picture = event_orcs_orcs

	trigger = {
    country_culture_group  = orcs_group
    war = no
	}
	
	immediate = {
	}
	
	option = {
		name = "OK"	
    set_variable = {
      name = num_orcs
      value = 0
    }
    every_unit = {
      limit = {
        has_variable = displaced_orcs
      }
      every_sub_unit = {
        ROOT = {
          change_variable = {
            name = num_orcs
            add = 1
          }
        }
      }
      destroy_unit = yes
    }
    while = {
      limit = { var:num_orcs > 3 }
      random_owned_province = {
        limit = {
          total_population < population_cap
        }
        define_pop = {
          type = slaves
          culture = root.culture
          religion = root.religion
        }
      }
      change_variable = {
        name = num_orcs
        subtract = 6
      }
    }
    ai_chance = {
      base = 100
    }
	}
  option = {
    name = "FightOn" 
    ai_chance = {
      base = 0
    }
  }
}


lotr_maintenance.2 = { 
  type = country_event
  hidden = yes
  trigger = {
    OR = {
      this = c:GON
      this = c:CAR
      # this = c:ARN
    }
    has_civil_war = yes
  }
  immediate = {
    every_current_war = {
      limit = { is_civil_war = yes }
      every_war_participant = {
        limit = {
          OR = {
            is_subject_type = satrapy
            is_subject_type = ranger_protectorate
          }
        }
        add_to_list = fighting_subjects
        PREV = {
          remove_from_war = PREV.PREV
        }
      }
    }
    every_in_list = {
      list = fighting_subjects
      overlord = { release_subject = PREV }
      ROOT = {
        if = { 
          limit = { THIS = c:GON }
          make_subject = {
            target = PREV
            type = satrapy
          }
        }
        else
        {
          make_subject = {
            target = PREV
            type = ranger_protectorate
          }
        }
      }
    }
  }
}
