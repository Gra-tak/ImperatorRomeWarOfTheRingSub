namespace = orc_raid_events

#Wolf riders border
orc_raid_events.1 = {
	type = country_event
	title = "orc_raid_events.1.t"
	desc = "orc_raid_events.1.desc"
	picture = event_orc_wargriders
	
	left_portrait = root.current_ruler
	
	goto_location = scope:orc_raid_event1_scope
	
	trigger = {
		is_ai = no
		NOT = { religion = melkorism }
		religion = iluvatarism
		c:XJX = { has_land = yes } #Orcs of Moria
		capital_scope = {
			OR = {
				is_in_region = forochel_region
				is_in_region = forlindon_region
				is_in_region = numeriador_region
				is_in_region = mithlond_region
				is_in_region = harlindon_region
				is_in_region = tawar_norndor_region
				is_in_region = fortund_region
				is_in_region = siragale_region
				is_in_region = arthedain_region
				is_in_region = angmar_region
				is_in_region = dyr_erib_region
				is_in_region = mintyrnath_region
				is_in_region = cardolan_region
				is_in_region = minhiriath_region
				is_in_region = enedhwaith_region
				is_in_region = druwaith_region
				is_in_region = andrast_region
				is_in_region = anfalas_region
				is_in_region = hairaverkien_region
				is_in_region = dunendor_region
				is_in_region = dor_wathui_region
				is_in_region = eregion_region
				is_in_region = rhudaur_region
				is_in_region = pend_hithaeglir_region
				is_in_region = anduin_region
				is_in_region = lorien_region
				is_in_region = rhuvenlhad_region
				is_in_region = calenardhon_region
				is_in_region = eryn_galen_region
				is_in_region = ered_mithrin_region
				is_in_region = uvanwaith_region
				is_in_region = lamedon_region
				is_in_region = belfalas_region
				is_in_region = anorien_region
				is_in_region = lebennin_region
				is_in_region = ithilien_region
			}
		}
		any_owned_province = {
			NOT = {
				has_building = fortress_building
			}
			any_neighbor_province = {
				NOT = { owner = root }
			}
		}
		NOT = {
			has_variable = orc_raid_event1_variable
		}
	}
	
	immediate = {
		random_owned_province = {
			limit = {
				NOT = {
					has_building = fortress_building
				}
				any_neighbor_province = {
					NOT = { owner = root }
					OR = {
						terrain = hills
						terrain = mountains
						terrain = forest
						terrain = farmland
					}
				}
			}
			weight = {
				modifier = {
					factor = 10
					has_city_status = no
				}
				modifier = {
					factor = 10
					total_population < 6
				}
			}
			save_scope_as = orc_raid_event1_scope
		}
		set_variable = {
			name = orc_raid_event1_variable
			days = 1825
		}
	}
	
	option = {
		name = orc_raid_events.1.a
		custom_tooltip = "orc_raid_events.1.a.tt"
		add_manpower = -2
		add_stability = 5
	}
	option = {
		name = orc_raid_events.1.b
		custom_tooltip = "orc_raid_events.1.b.tt"
		scope:orc_raid_event1_scope = {
			add_province_modifier = {
				name = merchants_killed_orcs
				duration = 220
			}
		}
	}
	option = {
		name = orc_raid_events.1.c
		custom_tooltip = "orc_raid_events.1.c.tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
	}
}

#Generic orc raid
orc_raid_events.2 = {
	type = country_event
	title = "orc_raid_events.2.t"
	desc = "orc_raid_events.2.desc"
	picture = event_orcs_orcs
	
	left_portrait = root.current_ruler
	
	goto_location = scope:orc_raid_event2_scope
	
	trigger = {
		is_ai = no
		religion = iluvatarism
		c:XJX = { has_land = yes } #Orcs of Moria
		capital_scope = {
			OR = {
				is_in_region = forochel_region
				is_in_region = forlindon_region
				is_in_region = numeriador_region
				is_in_region = mithlond_region
				is_in_region = harlindon_region
				is_in_region = tawar_norndor_region
				is_in_region = fortund_region
				is_in_region = siragale_region
				is_in_region = arthedain_region
				is_in_region = angmar_region
				is_in_region = dyr_erib_region
				is_in_region = mintyrnath_region
				is_in_region = cardolan_region
				is_in_region = minhiriath_region
				is_in_region = enedhwaith_region
				is_in_region = druwaith_region
				is_in_region = andrast_region
				is_in_region = anfalas_region
				is_in_region = hairaverkien_region
				is_in_region = dunendor_region
				is_in_region = dor_wathui_region
				is_in_region = eregion_region
				is_in_region = rhudaur_region
				is_in_region = pend_hithaeglir_region
				is_in_region = anduin_region
				is_in_region = lorien_region
				is_in_region = rhuvenlhad_region
				is_in_region = calenardhon_region
				is_in_region = eryn_galen_region
				is_in_region = ered_mithrin_region
				is_in_region = uvanwaith_region
				is_in_region = lamedon_region
				is_in_region = belfalas_region
				is_in_region = anorien_region
				is_in_region = lebennin_region
				is_in_region = ithilien_region
			}
		}
		any_owned_province = {
			NOT = {
				has_building = fortress_building
			}
			any_neighbor_province = {
				NOT = { owner = root }
				OR = {
					terrain = hills
					terrain = mountains
					terrain = forest
					terrain = farmland
				}
			}
		}
		NOT = {
			OR = {
				has_variable = orc_raid_event2_variable
				has_variable = orc_raid_event2_defended_variable
			}
		}
	}
	
	immediate = {
		random_owned_province = {
			limit = {
				NOT = {
					has_building = fortress_building
				}
				any_neighbor_province = {
					NOT = { owner = root }
					OR = {
						terrain = hills
						terrain = mountains
						terrain = forest
						terrain = farmland
					}
				}
			}
			weight = {
				modifier = {
					factor = 10
					has_city_status = no
				}
				modifier = {
					factor = 300
					has_city_status = no
					total_population < 6
				}
			}
			save_scope_as = orc_raid_event2_scope
		}
		set_variable = {
			name = orc_raid_event2_variable
			days = 1825
		}
	}
	
	option = {
		name = orc_raid_events.2.a
		custom_tooltip = "orc_raid_events.2.a.tt"
		add_stability = -5
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
	}
	
	option = {
		name = orc_raid_events.2.b
		custom_tooltip = "orc_raid_events.2.b.tt"
		add_manpower = -2
		set_variable = {
			name = orc_raid_event2_defended_variable
			days = 3650 # 10 years
		}
		current_ruler = {
			add_popularity = popularity_large
		}
	}
	option = {
		name = orc_raid_events.2.c
		custom_tooltip = "orc_raid_events.2.c.tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
	}
}

#Burning village
orc_raid_events.3 = {
	type = country_event
	title = "orc_raid_events.3.t"
	desc = "orc_raid_events.3.desc"
	picture = event_orcs_burning
	
	left_portrait = root.current_ruler
	
	goto_location = scope:orc_raid_event3_scope
	
	trigger = {
		is_ai = no
		religion = iluvatarism
		c:XJX = { has_land = yes } #Orcs of Moria
		capital_scope = {
			OR = {
				is_in_region = forochel_region
				is_in_region = forlindon_region
				is_in_region = numeriador_region
				is_in_region = mithlond_region
				is_in_region = harlindon_region
				is_in_region = tawar_norndor_region
				is_in_region = fortund_region
				is_in_region = siragale_region
				is_in_region = arthedain_region
				is_in_region = angmar_region
				is_in_region = dyr_erib_region
				is_in_region = mintyrnath_region
				is_in_region = cardolan_region
				is_in_region = minhiriath_region
				is_in_region = enedhwaith_region
				is_in_region = druwaith_region
				is_in_region = andrast_region
				is_in_region = anfalas_region
				is_in_region = hairaverkien_region
				is_in_region = dunendor_region
				is_in_region = dor_wathui_region
				is_in_region = eregion_region
				is_in_region = rhudaur_region
				is_in_region = pend_hithaeglir_region
				is_in_region = anduin_region
				is_in_region = lorien_region
				is_in_region = rhuvenlhad_region
				is_in_region = calenardhon_region
				is_in_region = eryn_galen_region
				is_in_region = ered_mithrin_region
				is_in_region = uvanwaith_region
				is_in_region = lamedon_region
				is_in_region = belfalas_region
				is_in_region = anorien_region
				is_in_region = lebennin_region
				is_in_region = ithilien_region
			}
		}
		any_owned_province = {
			NOT = {
				has_building = fortress_building
			}
			any_neighbor_province = {
				NOT = { owner = root }
				OR = {
					terrain = hills
					terrain = mountains
					terrain = forest
					terrain = farmland
				}
			}
		}
		NOT = {
			has_variable = orc_raid_event3_variable
		}
	}
	
	immediate = {
		random_owned_province = {
			limit = {
				NOT = {
					has_building = fortress_building
				}
				any_neighbor_province = {
					NOT = { owner = root }
					OR = {
						terrain = hills
						terrain = mountains
						terrain = forest
						terrain = farmland
					}
				}
			}
			weight = {
				modifier = {
					factor = 10
					has_city_status = no
				}
				modifier = {
					factor = 0
					has_city_status = no
					num_of_fortress_building > 0
				}
				modifier = {
					factor = 300
					total_population < 6
				}
				modifier = {
					factor = 500
					has_city_status = no
					num_of_fortress_building = 0
				}
			}
			save_scope_as = orc_raid_event3_scope
		}
		set_variable = {
			name = orc_raid_event3_variable
			days = 1825
		}
	}
	
	option = {
		name = orc_raid_events.3.a
		custom_tooltip = "orc_raid_events.3.a.tt"
		add_manpower = -2
		add_stability = 5
	}
	option = {
		name = orc_raid_events.3.b
		custom_tooltip = "orc_raid_events.3.b.tt"
		add_political_influence = -10
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
	}
	option = {
		name = orc_raid_events.3.c
		custom_tooltip = "orc_raid_events.3.c.tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
	}
}

#Neighbor village
orc_raid_events.4 = {
	type = country_event
	title = "orc_raid_events.4.t"
	desc = "orc_raid_events.4.desc"
	picture = event_orcs_burning
	
	left_portrait = root.current_ruler
	
	goto_location = scope:orc_raid_event4_province
	
	trigger = {
		is_ai = no
		religion = iluvatarism
		c:XJX = { has_land = yes } #Orcs of Moria
		capital_scope = {
			OR = {
				is_in_region = forochel_region
				is_in_region = forlindon_region
				is_in_region = numeriador_region
				is_in_region = mithlond_region
				is_in_region = harlindon_region
				is_in_region = tawar_norndor_region
				is_in_region = fortund_region
				is_in_region = siragale_region
				is_in_region = arthedain_region
				is_in_region = angmar_region
				is_in_region = dyr_erib_region
				is_in_region = mintyrnath_region
				is_in_region = cardolan_region
				is_in_region = minhiriath_region
				is_in_region = enedhwaith_region
				is_in_region = druwaith_region
				is_in_region = andrast_region
				is_in_region = anfalas_region
				is_in_region = hairaverkien_region
				is_in_region = dunendor_region
				is_in_region = dor_wathui_region
				is_in_region = eregion_region
				is_in_region = rhudaur_region
				is_in_region = pend_hithaeglir_region
				is_in_region = anduin_region
				is_in_region = lorien_region
				is_in_region = rhuvenlhad_region
				is_in_region = calenardhon_region
				is_in_region = eryn_galen_region
				is_in_region = ered_mithrin_region
				is_in_region = uvanwaith_region
				is_in_region = lamedon_region
				is_in_region = belfalas_region
				is_in_region = anorien_region
				is_in_region = lebennin_region
				is_in_region = ithilien_region
			}
		}
		any_neighbour_country = { #Is ai eru neighbor
			is_ai = yes
			religion = iluvatarism
			NOT = { war_with = root }
			any_owned_province = {
				any_neighbor_province = {
					has_owner = yes
					owner = ROOT
				}
			}
		}
		NOT = {
			has_variable = orc_raid_event4_variable
		}
	}
	
	immediate = {
		random_neighbour_country = {
			limit = { #Is ai eru neighbor
				is_ai = yes
				religion = iluvatarism
				NOT = { war_with = root }
				any_owned_province = {
					any_neighbor_province = {
						has_owner = yes
						owner = ROOT
					}
				}
			}
			save_scope_as = orc_raid_event4_country
		}
		ordered_owned_province = {
			limit = {
				any_neighbor_province = {
					has_owner = yes
					owner = scope:orc_raid_event4_country
				}
			}
			order_by = {
				value = 0
				add = population_cap
				subtract = total_population
			}
			save_scope_as = orc_raid_event4_province
		}
		set_variable = {
			name = orc_raid_event4_variable
			days = 1825
		}
	} # orc_raid_event4_scope
	
	option = {
		name = orc_raid_events.4.a
		custom_tooltip = "orc_raid_events.4.a.tt"
		scope:orc_raid_event4_province = {
			define_pop = {
				type = freemen
				religion = scope:orc_raid_event4_country.religion
				culture = scope:orc_raid_event4_country.culture
			}
		}
	}
	option = {
		name = orc_raid_events.4.b
		custom_tooltip = "orc_raid_events.4.b.tt"
		add_tyranny = tyranny_small
	}
}