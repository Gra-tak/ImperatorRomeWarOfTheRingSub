namespace = lotr_startup

lotr_startup.1 = { #Temp fix for new vanilla fort capacity mechanic causing income issues
	
	type = country_event
	hidden = yes

	trigger = {
		tag = GON
	}
	
	immediate = {
			p:1300 = {
				state = {
					add_state_modifier = {
						name = minas_anor_state_modifier
						duration = -1
						mode = add
					}
				}
			}
			p:1030 = {
				state = {
					add_state_modifier = {
						name = minas_ithil_state_modifier
						duration = -1
						mode = add
					}
				}
			}
			p:1141 = {
				state = {
					add_state_modifier = {
						name = barad_dur_state_modifier
						duration = -1
						mode = add
					}
				}
			}
			p:1021 = {
				state = {
					add_state_modifier = {
						name = black_gate_state_modifier
						duration = -1
						mode = add
					}
				}
			}
			p:1546 = {
				state = {
					add_state_modifier = {
						name = orthanc_state_modifier
						duration = -1
						mode = add
					}
				}
			}
	}	
}

lotr_startup.2 = { #Adds dynamic barad dur model
	
	type = country_event
	hidden = yes

	trigger = {
		tag = MOR
		NOT = { has_variable = shown_lotr_wonders }
	}
	
	immediate = {
		set_variable = { name = shown_lotr_wonders }
		hidden_effect = {
			p:1141 = {
				show_model = "wonder_barad_dur"
			}
			p:1021 = {
				show_model = "the_black_gate"
			}
			p:1030 = {
				show_model = "black_wall"
			}
		}
	}	
}

lotr_startup.3 = {
	
	type = country_event
	hidden = yes

	trigger = {
		tag = LOR
	}
	
	immediate = {
		if = {
			limit = { is_ai = no }
			char:62 = { #move Celebrían to imladris before killing here to prevent popup
				move_country = c:IML
			}
		}
		char:17 = {
			every_child = {
				death = { 
					death_reason = departed_for_valinor
				}
			}
			add_loyalty = Devoted
		}
	}	
}

lotr_startup.4 = {
	
	type = country_event
	hidden = yes

	trigger = {
		tag = CAR
	}
	
	immediate = {
		char:64 = { add_loyalty = Devoted }
		char:65 = { add_loyalty = grey_company }
		char:66 = { add_loyalty = grey_company }
		char:67 = { add_loyalty = grey_company }
		char:68 = { add_loyalty = grey_company }
		char:69 = { add_loyalty = grey_company }
		char:70 = { add_loyalty = grey_company }
		char:71 = { add_loyalty = grey_company }
		char:72 = { add_loyalty = grey_company }
		char:73 = { add_loyalty = grey_company }
		char:74 = { add_loyalty = grey_company }
	}
}

lotr_startup.5 = {
	
	type = country_event
	hidden = yes

	trigger = {
		tag = LIN
	}
	
	immediate = {
		add_country_modifier = {
			name = devoted_vassal
			duration = -1
		}
	}
}

